{% extends 'base_dashboard.html' %}
{% load static %}
{% block content %}

<style>
    /* Style for the console window */
    .console {
        background-color: #333;
        color: #fff;
        border: 1px solid #666;
        border-radius: 5px;
        max-height: 300px;
        font-family: Arial, sans-serif; /* Change the font family here */
        overflow-y: auto; /* Add this to enable vertical scrolling */
    }

    /* Style for the copy button */
    .copy-button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
    }
</style>

<div class="main-panel">
    <p class="h3">Use our email API to send Mails.</p>
    <div class="content-wrapper">
        <p>This API service can greatly enhance customer interaction, enabling businesses to provide personalized and
            relevant responses. It's a powerful tool that can be integrated into various applications, websites, or
            platforms to create dynamic and engaging user experiences. Whether you're looking to provide customer
            support, gather feedback, or offer recommendations, the Email API can play a vital role in facilitating
            these interactions.


        </p>

        <div class="form-container" style="display: flex;">
            <div class="form-container" style="display: flex;">
                <form method="post" action="" style="width: 100%; margin-right: 20px;">
                    {% csrf_token %}

                    <div class="mb-3">
                        <label for="Name" class="form-label">From Name:</label>
                        <input type="text" placeholder="e.g API SERVICES" class="form-control" id="Name" name="Name"
                               aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                        <label for="Subject" class="form-label">Subject :</label>
                        <input type="text" placeholder="API SERVICES GENERAL MEETING" class="form-control"
                               name="Subject" id="Subject" aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                        <label for="To" class="form-label">To :</label>
                        <input type="email" placeholder="example@gmail.com" class="form-control" name="To" id="To"
                               aria-describedby="emailHelp">
                    </div>

                    <div class="mb-3">
                        <label for="messageBody" class="form-label">Message Body:</label>
                        <textarea class="form-control" id="messageBody" name="messageBody"
                                  style="height: 70px;"></textarea>
                    </div>
                    <button type="submit" class="btn btn-info">Submit</button>
                </form>
            </div>

                <div class="console-container"
                     style="flex: 1; background-color: #000; color: #fff; padding: 10px; height: 300px; overflow-y: scroll;">
                    <p><strong>Request.</strong></p>

                    <ul class="nav nav-pills">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Python</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Node.js</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Php</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#"><i class="mdi mdi-content-copy"></i></a>
                        </li>
                    </ul>         <!-- Code or messages can be dynamically added here -->

                </div>
            </div>


            <script>
                // Function to trigger typing animation when the response is available
                function showResponse(responseText) {
                    const responseElement = document.getElementById("response-text");
                    const typingAnimationElement = responseElement.previousElementSibling; // Get the typing animation span

                    // Split the response text into characters
                    const characters = responseText.split("");
                    let index = 0;

                    // Function to simulate typing animation
                    function typeNextCharacter() {
                        if (index < characters.length) {
                            responseElement.textContent += characters[index];
                            index++;
                            setTimeout(typeNextCharacter, 30); // Adjust typing speed here
                        }
                    }

                    // Start the typing animation
                    typeNextCharacter();

                    // Hide the typing animation span
                    typingAnimationElement.style.display = "none";
                }

                // Simulate generating a response and trigger the typing animation when it's available
                setTimeout(function () {
                    const responseText = "{{ response }}"; // Enclose in double quotes
                    showResponse(responseText);
                }, 1000); // Simulate a delay for generating the response
            </script>


            <script>
                const codeElement = document.getElementById('code');
                const codeSnippet = `import client as api\n\n# Generate access Token\nToken = api.generate_token('waynealex', 'afgded768790-efadhbkjdf78jkfa')\n\nif not Token:\n    print('error generating token!')\nelse:\n    # Send request with the Token\n    message = 'Good morning?'\n    response = api.chatgpt(Token.token, message)\n    if response.status_code == 200:\n        print(response)\n    else:\n        print(response.status_code)`;

                let index = 0;

                function typeCode() {
                    if (index < codeSnippet.length) {
                        codeElement.textContent += codeSnippet.charAt(index);
                        index++;
                        setTimeout(typeCode, 50); // Adjust the typing speed here (milliseconds)
                    }
                }

                typeCode();

                const codeElement = document.getElementById('code1');
                const codeSnippet = "{{ response }}";

                let index = 0;

                function typeCode1() {
                    if (index < codeSnippet.length) {
                        codeElement.textContent += codeSnippet.charAt(index);
                        index++;
                        setTimeout(typeCode1, 50); // Corrected function name
                    }
                }

                typeCode1();
            </script>

        </div>

    </div>

</div>
{% endblock %}